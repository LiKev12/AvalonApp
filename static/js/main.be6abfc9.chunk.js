(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){e.exports={AboutPage:"AboutPage_AboutPage__265Bb",Avatars:"AboutPage_Avatars__1-ES1",AboutTextContainer:"AboutPage_AboutTextContainer__2_n2h"}},105:function(e,t,a){e.exports={RoundTracker:"RoundTracker_RoundTracker__36oUr",RoundTrackerToken:"RoundTracker_RoundTrackerToken__2n2iT"}},106:function(e,t,a){e.exports={FeatureCardContainer:"FeatureCard_FeatureCardContainer__2nfDA",FeatureCardHeaderContainer:"FeatureCard_FeatureCardHeaderContainer__-sxyO",FeatureCardImage:"FeatureCard_FeatureCardImage__mG2fh",FeatureCardTextContainer:"FeatureCard_FeatureCardTextContainer__1RoVE"}},140:function(e,t,a){e.exports={ChartOuterContainer:"AboutStatsGames_ChartOuterContainer__2ieJ_",ChartInnerContainer:"AboutStatsGames_ChartInnerContainer__1LT9i"}},142:function(e,t,a){e.exports={ChartOuterContainer:"AboutStatsUsers_ChartOuterContainer__3NuSZ",ChartInnerContainer:"AboutStatsUsers_ChartInnerContainer__1THWe"}},143:function(e,t,a){e.exports={FullPageContainer:"LoadingSpinner_FullPageContainer__2zTrn",FullPageLoadingSpinner:"LoadingSpinner_FullPageLoadingSpinner__3c75m",spin:"LoadingSpinner_spin__cyfS6"}},144:function(e,t,a){e.exports={Button:"GameRoom_Button__2hnSU"}},145:function(e,t,a){e.exports={GameBoard:"GameBoard_GameBoard__7eOzF",GameBackground:"GameBoard_GameBackground__QvTqp"}},146:function(e,t,a){e.exports={ToggleLobbyModalButton:"LobbyModal_ToggleLobbyModalButton__1fdFb",CreateRoomButton:"LobbyModal_CreateRoomButton__21tNV"}},149:function(e,t,a){e.exports={RulesVideoContainer:"RulesPage_RulesVideoContainer__39rd9"}},23:function(e,t,a){e.exports={CellCenterText:"StatsHeadToHead_CellCenterText__1QQPh",CellCenterTextVertical:"StatsHeadToHead_CellCenterTextVertical__3mRrP",TableContainer:"StatsHeadToHead_TableContainer__3-6oo"}},232:function(e,t,a){e.exports={ModalFooterCustom:"GameEnterModal_ModalFooterCustom__35ouc"}},233:function(e,t,a){e.exports={GameNav:"GameNav_GameNav__8oISB"}},234:function(e,t,a){e.exports={TableContainer:"GameVotingRecord_TableContainer__2f86_"}},235:function(e,t,a){e.exports={Button:"GameSetupModal_Button__2yOJQ"}},236:function(e,t,a){e.exports={LobbyPageContainer:"LobbyPage_LobbyPageContainer__33MOA"}},237:function(e,t,a){e.exports={LobbyTableButton:"LobbyPrivateRoomModal_LobbyTableButton__2gqIZ"}},238:function(e,t,a){e.exports={CharacterCardsContainer:"CharacterCards_CharacterCardsContainer__2ZBwY"}},239:function(e,t,a){e.exports={RatingBanner:"StatsPage_RatingBanner__1xx9e"}},24:function(e,t,a){e.exports={CellCenterText:"StatsIndividualHistory_CellCenterText__3Gnjb",TableContainer:"StatsIndividualHistory_TableContainer__3kmf0"}},25:function(e,t,a){e.exports={LobbyTableCell:"LobbyTable_LobbyTableCell__2eYxG",LobbyTableButton:"LobbyTable_LobbyTableButton__3yGEX",TableContainer:"LobbyTable_TableContainer__30bBD"}},27:function(e,t,a){e.exports={CellCenterText:"StatsIndividualByRoles_CellCenterText__OxnNC",TableContainer:"StatsIndividualByRoles_TableContainer__3qDmC"}},281:function(e,t,a){},33:function(e,t,a){e.exports={CellCenterText:"StatsIndividualOverall_CellCenterText__IxGlE",TableContainer:"StatsIndividualOverall_TableContainer__1TGTS"}},36:function(e,t,a){e.exports={ChatTimestamp:"Chat_ChatTimestamp__50tkV",ChatUsername:"Chat_ChatUsername__3bZP8",ChatMessage:"Chat_ChatMessage__1j9oh",OuterTableContainer:"Chat_OuterTableContainer__3JKwI",TableHeader:"Chat_TableHeader__3h1Si",TableBodyContainer:"Chat_TableBodyContainer__6HfYG",TableBody:"Chat_TableBody__3YEIt"}},510:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),s=a.n(r),c=a(48),i=a.n(c),o=a(9),l=a(10),d=a(12),j=a(11),u=a(20),h=a(34),b=a(51),m=a(222),O="USER_LOADING",x="USER_LOADED",p="AUTH_ERROR",_="LOGIN_SUCCESS",g="LOGIN_FAIL",C="LOGOUT_SUCCESS",f="REGISTER_SUCCESS",v="REGISTER_FAIL",y="GET_ERRORS",T="CLEAR_ERRORS",S={msg:{},status:null,id:null},k=a(16),N={token:sessionStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},R=Object(b.c)({error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case T:return{msg:{},status:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(k.a)(Object(k.a)({},e),{},{isLoading:!0});case x:return Object(k.a)(Object(k.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload.user});case _:case f:return sessionStorage.setItem("token",t.payload.token),sessionStorage.setItem("user_name",t.payload.user.name),Object(k.a)(Object(k.a)(Object(k.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case p:case g:case C:case v:return sessionStorage.removeItem("token"),sessionStorage.removeItem("user_name"),Object(k.a)(Object(k.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}}}),L=[m.a],A=Object(b.e)(R,{},Object(b.d)(b.a.apply(void 0,L))),E=(a(280),a(281),a(38)),I=a.n(E),P=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:y,payload:{msg:e,status:t,id:a}}},w=function(){return{type:T}},M=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};return t&&(a.headers["x-auth-token"]=t),a},B=a(521),D=a(522),G=a(523),F=a(524),H=a(525),U=a(526),Y=a(527),W=a(512);function V(){return Object(n.jsx)("div",{children:Object(n.jsx)(W.a,{href:"/",children:"Home"})})}function K(){return Object(n.jsx)("div",{children:Object(n.jsx)(W.a,{href:"https://likev12.github.io/AvalonApp/#/about",children:"About"})})}function J(){return Object(n.jsx)("div",{children:Object(n.jsx)(W.a,{href:"https://likev12.github.io/AvalonApp/#/rules",children:"Rules"})})}function q(){return Object(n.jsx)("div",{children:Object(n.jsx)(W.a,{href:"https://likev12.github.io/AvalonApp/#/stats",children:"Stats"})})}var z=a(49),Q=a(533),Z=a(513),X=a(514),$=a(515),ee=a(516),te=a(517),ae=a(518),ne=a(519),re=a(520),se=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1,name:"",password:"",msg:null},e.toggle=function(){e.props.clearErrors(),e.setState({modal:!e.state.modal})},e.onChange=function(t){e.setState(Object(z.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n={name:a.name,password:a.password};e.props.login(n)},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.isAuthenticated;a!==e.error&&("LOGIN_FAIL"===a.id?this.setState({msg:a.msg.msg}):this.setState({msg:null})),this.state.modal&&n&&this.toggle()}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{onClick:this.toggle,href:"#",children:"Login"}),Object(n.jsxs)(Q.a,{isOpen:this.state.modal,toggle:this.toggle,children:[Object(n.jsx)(Z.a,{toggle:this.toggle,children:"Login"}),Object(n.jsxs)(X.a,{children:[this.state.msg?Object(n.jsx)($.a,{color:"danger",children:this.state.msg}):null,Object(n.jsx)(ee.a,{onSubmit:this.onSubmit,children:Object(n.jsxs)(te.a,{children:[Object(n.jsx)(ae.a,{for:"name",children:"Username"}),Object(n.jsx)(ne.a,{type:"text",name:"name",id:"name",placeholder:"Username",className:"mb-3",onChange:this.onChange}),Object(n.jsx)(ae.a,{for:"password",children:"Password"}),Object(n.jsx)(ne.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:this.onChange}),Object(n.jsx)(re.a,{color:"dark",style:{marginTop:"2rem"},block:!0,children:"Login"})]})})]})]})]})}}]),a}(r.Component),ce=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{login:function(e){var t=e.name,a=e.password;return function(e){var n=JSON.stringify({name:t,password:a});I.a.post("/api/auth",n,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:_,payload:t.data})})).catch((function(t){e(P(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:g})}))}},clearErrors:w})(se),ie=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)(r.Fragment,{children:Object(n.jsx)(W.a,{onClick:this.props.logout,href:"/",children:"Logout"})})}}]),a}(r.Component),oe=Object(u.b)(null,{logout:function(){return{type:C}}})(ie),le=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1,name:"",email:"",password:"",msg:null},e.toggle=function(){e.props.clearErrors(),e.setState({modal:!e.state.modal})},e.onChange=function(t){e.setState(Object(z.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n={name:a.name,email:a.email,password:a.password};e.props.register(n)},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.isAuthenticated;a!==e.error&&("REGISTER_FAIL"===a.id?this.setState({msg:a.msg.msg}):this.setState({msg:null})),this.state.modal&&n&&this.toggle()}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(W.a,{onClick:this.toggle,href:"#",children:"Register"}),Object(n.jsxs)(Q.a,{isOpen:this.state.modal,toggle:this.toggle,children:[Object(n.jsx)(Z.a,{toggle:this.toggle,children:"Register"}),Object(n.jsxs)(X.a,{children:[this.state.msg?Object(n.jsxs)($.a,{color:"danger",children:[this.state.msg," "]}):null,Object(n.jsx)(ee.a,{onSubmit:this.onSubmit,children:Object(n.jsxs)(te.a,{children:[Object(n.jsx)(ae.a,{for:"name",children:"Username"}),Object(n.jsx)(ne.a,{type:"text",name:"name",id:"name",placeholder:"Name",className:"mb-3",onChange:this.onChange,maxLength:15}),Object(n.jsx)(ae.a,{for:"email",children:"Email"}),Object(n.jsx)(ne.a,{type:"email",name:"email",id:"email",placeholder:"Email",className:"mb-3",onChange:this.onChange}),Object(n.jsx)(ae.a,{for:"password",children:"Password"}),Object(n.jsx)(ne.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:this.onChange}),Object(n.jsx)(re.a,{color:"dark",style:{marginTop:"2rem"},block:!0,children:"Register"})]})})]})]})]})}}]),a}(r.Component),de=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{register:function(e){var t=e.name,a=e.email,n=e.password;return function(e){var r=JSON.stringify({name:t,email:a,password:n});I.a.post("/api/users",r,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:f,payload:t.data})})).catch((function(t){e(P(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:v})}))}},clearErrors:w})(le),je=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.auth.isAuthenticated,t=this.props.auth&&this.props.auth.user?this.props.auth.user.name:"",a=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(B.a,{children:Object(n.jsx)(V,{})}),Object(n.jsx)(B.a,{children:Object(n.jsx)(K,{})}),Object(n.jsx)(B.a,{children:Object(n.jsx)(J,{})})]}),s=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(B.a,{children:Object(n.jsx)("span",{className:"navbar-text mr-3",children:Object(n.jsx)("strong",{children:"Welcome ".concat(t)})})}),a,Object(n.jsx)(B.a,{children:Object(n.jsx)(q,{})}),Object(n.jsx)(B.a,{children:Object(n.jsx)(oe,{})})]}),c=Object(n.jsxs)(r.Fragment,{children:[a,Object(n.jsx)(B.a,{children:Object(n.jsx)(de,{})}),Object(n.jsx)(B.a,{children:Object(n.jsx)(ce,{})})]});return Object(n.jsx)("div",{children:Object(n.jsx)(D.a,{color:"dark",dark:!0,expand:"sm",children:Object(n.jsxs)(G.a,{children:[Object(n.jsx)(F.a,{href:"/",children:"Avalon"}),Object(n.jsx)(H.a,{onClick:this.toggle}),Object(n.jsx)(U.a,{isOpen:this.state.isOpen,navbar:!0,children:Object(n.jsx)(Y.a,{className:"ml-auto",navbar:!0,children:e?s:c})})]})})})}}]),a}(r.Component),ue=Object(u.b)((function(e){return{auth:e.auth}}),null)(je),he=a(22),be=a(103),me=a.n(be),Oe=a.p+"static/media/Assassin.5a5d7bc4.png",xe=a.p+"static/media/DrunkMerlin.8f7762fb.png",pe=a.p+"static/media/LoyalServant.119ec312.png",_e=a.p+"static/media/Merlin.e3edb5d5.png",ge=a.p+"static/media/Minion.da0a369a.png",Ce=a.p+"static/media/Mordred.03c972d0.png",fe=a.p+"static/media/Morgana.c08a9b92.png",ve=a.p+"static/media/Oberon.49ff93ae.png",ye=a.p+"static/media/Percival.c47c4ea0.png",Te=a.p+"static/media/Unknown.448807e5.png",Se=Oe,ke=xe,Ne=pe,Re=_e,Le=ge,Ae=Ce,Ee=fe,Ie=ve,Pe=ye,we=Te,Me=(a(53),a(528)),Be=(a(140),a(21),a(142),a(143)),De=a.n(Be),Ge=a.p+"static/media/AvalonSpinner.48e2424c.png",Fe=function(e){return Object(n.jsx)("div",{className:De.a.FullPageContainer,children:Object(n.jsx)("img",{className:De.a.FullPageLoadingSpinner,src:Ge,alt:"loading"})})},He=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoadingUsersOverTime:!1,isLoadingGamesOverTime:!0,isLoadingLeaderboard:!1,usersOverTimeData:null,gamesOverTimeData:null,leaderboardData:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.isLoadingUsersOverTime,a=e.isLoadingGamesOverTime,r=e.isLoadingLeaderboard;e.usersOverTimeData,e.gamesOverTimeData,e.leaderboardData;return t||a||r?Object(n.jsx)(Fe,{}):Object(n.jsx)("div",{className:me.a.AboutPage,children:Object(n.jsxs)(G.a,{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"About the App"}),Object(n.jsx)("hr",{}),Object(n.jsx)("hr",{}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:me.a.AboutTextContainer,children:[Ue,Ye]})]})})}}]),a}(r.Component),Ue=Object(n.jsxs)("div",{children:[Object(n.jsx)("h4",{children:"This was a fun project done by 2 friends in quarantine during the Covid-19 Pandemic."}),Object(n.jsx)("h5",{children:Object(n.jsx)("div",{style:{fontStyle:"italic"},children:"~ Art and design credits to a secret Merlin, coded by her Percival ~"})}),Object(n.jsxs)("div",{className:me.a.Avatars,children:[Object(n.jsx)("img",{src:Re,alt:"Merlin"}),Object(n.jsx)("img",{src:Pe,alt:"Percival"})]})]}),Ye=Object(n.jsxs)("h6",{children:["Feel free to leave feedback"," ",Object(n.jsx)("a",{href:"mailto:avalon.app.game@gmail.com?subject=AvalonApp",target:"_blank",rel:"noopener noreferrer",children:"here"}),". GitHub link"," ",Object(n.jsx)("a",{href:"https://github.com/LiKev12/AvalonApp",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]}),We=a(144),Ve=a.n(We),Ke=a(231),Je=a.n(Ke)()(),qe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsx)(G.a,{children:Object(n.jsx)($.a,{color:"danger",style:{marginTop:"2rem"},children:"Please log in to view."})})})}}]),a}(r.Component),ze=a(145),Qe=a.n(ze),Ze=a(57),Xe=a.n(Ze),$e=function(e){var t=e.player,a=e.player_idx,r=e.total_num_players,s=e.onClickPlayerCard,c=e.button,i=t.user_name,o=t.isSelected,l=t.isLeader,d=t.isHammer,j=t.isGivenExcalibur,u=t.isGivenLOTL,h=t.activeState,b=t.roleAppearsAs,m=t.teamAppearsAs,O=nt(m,b,h,a,r,c),x=d?"\u2606".concat(i):i;return Object(n.jsxs)("div",{className:Xe.a.PlayerCard,style:O,onClick:function(){return s(a)},children:[l?Object(n.jsx)("div",{className:Xe.a.LeaderMarker}):null,o?Object(n.jsx)("div",{className:Xe.a.MissionMarker}):null,j?Object(n.jsx)("div",{className:Xe.a.ExcaliburMarker}):null,u?Object(n.jsx)("div",{className:Xe.a.LadyMarker}):null,Object(n.jsx)("div",{className:Xe.a.NameBanner,children:x})]})},et={Assassin:Se,DrunkMerlin:ke,LoyalServant:Ne,Percival:Pe,Merlin:Re,Minion:Le,Mordred:Ae,Morgana:Ee,Oberon:Ie,Unknown:we},tt={RESISTANCE:"5px solid #7EC8E3",SPY:"5px solid #f75454"},at={IS_STILL_VOTING:"0 0 20px yellow",IS_TARGETED_BY_EXCALIBUR:"0 0 20px purple",IS_TARGETED_BY_ASSASSIN:"0 0 20px red",IS_TARGETED_BY_LOTL:"0 0 20px #00FFFF"},nt=function(e,t,a,n,r){var s={};s.border=tt[e],s.backgroundImage="url(".concat(et[t],")"),a&&(s.boxShadow=at[a]);var c=function(e,t){return 270+360/t*e}(n,r);return s.transform="rotate(".concat(c,"deg) translate(320px) rotate(").concat(-c,"deg)"),s},rt=a(105),st=a.n(rt),ct=a(0),it=a.n(ct),ot=a.p+"static/media/TokenRound.03c12dcd.png",lt=a.p+"static/media/TokenRound1.fd700c31.png",dt=a.p+"static/media/TokenRound2.9f388a6e.png",jt=a.p+"static/media/TokenRound3.53a49c8e.png",ut=a.p+"static/media/TokenRound4.7178df17.png",ht=a.p+"static/media/TokenRound5.be5aa5fb.png",bt=function(e){var t=_t(e.data);return Object(n.jsx)("div",{className:st.a.RoundTracker,children:t})};bt.props={data:it.a.number};var mt=bt,Ot={0:ot,1:lt,2:dt,3:jt,4:ut,5:ht},xt=Object(n.jsx)("div",{className:st.a.RoundTrackerToken,style:{backgroundImage:"url(".concat(ot,")")}}),pt=function(e){return Object(n.jsx)("div",{className:st.a.RoundTrackerToken,style:{backgroundImage:"url(".concat(Ot[e],")")}})},_t=function(e){var t=[];return[1,2,3,4,5].forEach((function(a){a===e?t.push(Object(n.jsx)(r.Fragment,{children:xt},a)):t.push(Object(n.jsx)(r.Fragment,{children:pt(a)},a))})),t},gt=a(83),Ct=a.n(gt),ft=a.p+"static/media/TokenNull.06cb4858.png",vt=a.p+"static/media/TokenPass.058ecf61.png",yt=a.p+"static/media/TokenFail.fbbf1c0c.png",Tt=function(e){var t=[];return[1,2,3,4,5].forEach((function(a){var r=e.data[a],s=r.isPassed,c=r.num_spots_on_mission,i=r.num_fails_required,o=kt(s,c,i);t.push(Object(n.jsx)("div",{children:o},a))})),Object(n.jsx)("div",{className:Ct.a.MissionTracker,children:t})},St={null:ft,true:vt,false:yt},kt=function(e,t,a){var r=Object(n.jsxs)("div",{className:Ct.a.MissionTrackerText,children:[t,a>1?Object(n.jsx)("sub",{className:Ct.a.MissionTrackerSubtext,children:a}):null]});return Object(n.jsx)("div",{className:Ct.a.MissionTrackerToken,style:{backgroundImage:"url(".concat(St[e],")")},children:r})},Nt=a(71),Rt=a.n(Nt),Lt="propose",At="round",Et="mission",It="assassinate",Pt="give_excalibur",wt="use_excalibur",Mt="confirm_excalibur",Bt="use_lotl",Dt="confirm_lotl",Gt=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={buttonVisible:!0},e.handleOnClick=function(t,a){e.props.onHandleButtonClick(t,a),e.setState({buttonVisible:!e.state.buttonVisible})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.buttonVisible?Ft(this.props.button,this.props.team,this.props.onHandleButtonClick,this.handleOnClick):null;return Object(n.jsx)("div",{className:Rt.a.GameButtons,children:e})}}]),a}(r.Component),Ft=function(e,t,a,r){return e===At?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(re.a,{color:"success",className:Rt.a.GameButtonDuo,onClick:function(){return r(At,!0)},children:"approve"}),Object(n.jsx)(re.a,{color:"danger",className:Rt.a.GameButtonDuo,onClick:function(){return r(At,!1)},children:"reject"})]}):e===Et?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(re.a,{color:"success",className:Rt.a.GameButtonDuo,onClick:function(){return r(Et,!0)},children:"pass"}),"SPY"===t&&Object(n.jsx)(re.a,{color:"danger",className:Rt.a.GameButtonDuo,onClick:function(){return r(Et,!1)},children:"fail"})]}):e===Lt?Object(n.jsx)(re.a,{color:"info",onClick:function(){return r(Lt)},children:Lt}):e===It?Object(n.jsx)(re.a,{color:"danger",onClick:function(){return r(It)},children:It}):e===Pt?Object(n.jsx)(re.a,{color:"info",onClick:function(){return r(Pt)},children:"give excalibur"}):e===wt?Object(n.jsx)(re.a,{color:"info",onClick:function(){return r(wt,!0)},children:"use excalibur"}):"skip_excalibur"===e?Object(n.jsx)(re.a,{color:"secondary",onClick:function(){return r(wt,!1)},children:"skip excalibur"}):"confirm_excalibur_pass"===e?Object(n.jsx)(re.a,{color:"warning",onClick:function(){return r(Mt)},children:"Target player vote changed to pass"}):"confirm_excalibur_fail"===e?Object(n.jsx)(re.a,{color:"warning",onClick:function(){return r(Mt)},children:"Target player vote changed to fail"}):e===Bt?Object(n.jsx)(re.a,{color:"info",onClick:function(){return a(Bt)},children:"inquisit"}):"confirm_lotl_resistance"===e?Object(n.jsx)(re.a,{color:"secondary",onClick:function(){return a(Dt)},children:"Player is Resistance"}):"confirm_lotl_spy"===e?Object(n.jsx)(re.a,{color:"secondary",onClick:function(){return a(Dt)},children:"Player is Spy"}):null},Ht=function(e){var t=Ut(e),a=Yt(e);return Object(n.jsx)("div",{className:Qe.a.GameBackground,children:Object(n.jsxs)("div",{className:Qe.a.GameBoard,children:[t,Object(n.jsx)(Tt,{data:e.MISSION_TRACKER}),Object(n.jsx)(mt,{data:e.ROUND_TRACKER}),a]})})},Ut=function(e){var t=e.board;return t.map((function(a,r){var s={player:a,player_idx:r,total_num_players:t.length,onClickPlayerCard:e.onClickPlayerCard};return Object(n.jsx)($e,Object(k.a)({},s),r)}))},Yt=function(e){var t=e.button,a={button:t,team:e.team,onHandleButtonClick:e.onHandleButtonClick};return Object(r.createElement)(Gt,Object(k.a)(Object(k.a)({},a),{},{key:t}))},Wt=a(232),Vt=a.n(Wt),Kt=a(529),Jt=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modal:!0},e.toggle=function(){e.setState({modal:!e.state.modal})},e.onHandleJoin=function(){e.props.onHandleEnter(),e.toggle()},e.onHandleSpectate=function(){e.props.onHandleSpectate(),e.toggle()},e.onHandleRejoin=function(){e.toggle()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.room,a=e.hasStarted,r=e.isPlayerInGame,s=Object(n.jsx)(re.a,{color:"success",block:!0,onClick:this.onHandleRejoin,children:"Rejoin"}),c=Object(n.jsx)(re.a,{color:"success",block:!0,onClick:this.onHandleJoin,children:"Join"}),i=Object(n.jsx)(re.a,{color:"info",block:!0,onClick:this.onHandleSpectate,children:"Spectate"}),o=null;return o=a?r?s:i:Object(n.jsxs)("div",{children:[c,i]}),Object(n.jsx)("div",{children:Object(n.jsxs)(Q.a,{isOpen:this.state.modal,toggle:this.toggle,keyboard:!1,backdrop:"static",children:[Object(n.jsxs)(Z.a,{children:["Welcome to game ",t]}),Object(n.jsx)(Kt.a,{className:Vt.a.ModalFooterCustom,children:o})]})})}}]),a}(r.Component),qt=a(233),zt=a.n(qt),Qt=a(4),Zt=a.n(Qt),Xt=a(530),$t=a(531),ea=a(36),ta=a.n(ea),aa=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={message:"",chat:[]},e.socketEventListeners=function(){Je.on("client_get_chat",(function(t){e.setState({chat:t},(function(){e.changeTableScroll()}))}))},e.handleSubmitMessage=function(t){if(t.preventDefault(),0!==e.state.message.length){var a=e.props.auth&&e.props.auth.user?e.props.auth.user.name:"",n={flag:"msg",msg:e.state.message,user_name:a,room:e.props.room};e.setState({message:""}),Je.emit("server_get_chat",n)}},e.changeTableScroll=function(){var e=document.getElementById("chat_body_id");e.scrollTop=e.scrollHeight},e.handleKeyDown=function(t){"Enter"===t.key&&e.handleSubmitMessage(t)},e.handleMessageChange=function(t){e.setState({message:t.target.value})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e={flag:"get",room:this.props.room};Je.emit("server_get_chat",e),this.socketEventListeners()}},{key:"render",value:function(){var e=this.state.chat.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:ta.a.ChatTimestamp,children:e.timestamp}),Object(n.jsx)("td",{className:ta.a.ChatUsername,children:e.user_name}),Object(n.jsx)("td",{className:ta.a.ChatMessage,children:e.message})]},t)}));return Object(n.jsxs)("div",{children:[Object(n.jsxs)(Me.a,{borderless:!0,size:"sm",className:ta.a.OuterTableContainer,children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)(Me.a,{className:ta.a.TableHeader,children:Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:ta.a.ChatTimestamp}),Object(n.jsx)("th",{className:ta.a.ChatUsername}),Object(n.jsx)("th",{className:ta.a.ChatMessage})]})})})})})}),Object(n.jsx)("tbody",{children:Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)("div",{className:ta.a.TableBodyContainer,id:"chat_body_id",children:Object(n.jsx)(Me.a,{className:ta.a.TableBody,children:Object(n.jsx)("tbody",{children:e})})})})})})]}),Object(n.jsx)(te.a,{children:Object(n.jsx)(ne.a,{type:"textarea",name:"text",placeholder:"Enter chat message here...",value:this.state.message,onChange:this.handleMessageChange,onKeyDown:this.handleKeyDown})})]})}}]),a}(r.Component),na=Object(u.b)((function(e){return{auth:e.auth}}))(aa),ra=a(84),sa=a.n(ra),ca=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).changeTableScroll=function(){var e=document.getElementById("transcript_body_id");e.scrollTop=e.scrollHeight},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.changeTableScroll()}},{key:"render",value:function(){var e=this.props.transcript,t=ia(e);return Object(n.jsx)("div",{children:Object(n.jsxs)(Me.a,{borderless:!0,size:"sm",className:sa.a.OuterTableContainer,children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)(Me.a,{className:sa.a.TableHeader,children:Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:Object(n.jsx)("th",{})})})})})})}),Object(n.jsx)("tbody",{children:Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)("div",{className:sa.a.TableBodyContainer,id:"transcript_body_id",children:Object(n.jsx)(Me.a,{className:sa.a.TableBody,children:Object(n.jsx)("tbody",{children:t})})})})})})]})})}}]),a}(r.Component),ia=function(e){return e?e.map((function(e,t){return Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:e})},t)})):[]},oa=a(234),la=a.n(oa),da={textAlign:"center"},ja=function(e){var t=e.voting_record,a=t.players,r=t.record,s=ua(),c=s.missionHeader,i=s.roundHeader,o=ha(a,r);return Object(n.jsx)("div",{className:la.a.TableContainer,children:Object(n.jsxs)(Me.a,{dark:!0,bordered:!0,children:[Object(n.jsxs)("thead",{children:[Object(n.jsx)("tr",{children:c},"mission_header"),Object(n.jsx)("tr",{children:i},"round_header")]}),Object(n.jsx)("tbody",{children:o})]})})},ua=function(){var e=[1,2,3,4,5],t=[Object(n.jsx)("th",{style:da,children:"Mission"},"mission_header_prefix")],a=[Object(n.jsx)("th",{style:da,children:"Round"},"round_header_prefix")];return e.forEach((function(r){t.push(Object(n.jsx)("th",{colSpan:5,style:da,children:r},"M".concat(r))),e.forEach((function(e){a.push(Object(n.jsx)("th",{style:da,children:e},"M".concat(r,"R").concat(e)))}))})),{missionHeader:t,roundHeader:a}},ha=function(e,t){var a=[1,2,3,4,5],r=[];return e.forEach((function(e,s){var c=[];c.push(Object(n.jsx)("th",{style:da,children:e},s)),a.forEach((function(e){a.forEach((function(a){if(!!t[e][a]){var r=t[e][a],i=r.votesRound[s]?"rgb(171, 255, 183)":"rgb(255, 186, 184)",o=r.leader===s?"3px solid black":"1px solid",l=r.team[s]?"\u2713":"",d={backgroundColor:i,border:o,color:"black",textAlign:"center"};c.push(Object(n.jsx)("th",{style:d,children:l},"M".concat(e,"R").concat(a)))}else c.push(Object(n.jsx)("th",{},"M".concat(e,"R").concat(a)))}))})),r.push(Object(n.jsx)("tr",{children:c},s))})),r},ba=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={activeTab:"Transcript"},e.toggleActiveTab=function(t){e.setState({activeTab:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:zt.a.GameNav,children:[Object(n.jsxs)(Y.a,{tabs:!0,children:[Object(n.jsx)(B.a,{children:Object(n.jsx)(W.a,{onClick:function(){e.toggleActiveTab("Transcript")},className:Zt()({active:"Transcript"===this.state.activeTab}),children:"Transcript"})}),Object(n.jsx)(B.a,{children:Object(n.jsx)(W.a,{onClick:function(){e.toggleActiveTab("Record")},className:Zt()({active:"Record"===this.state.activeTab}),children:"Record"})}),Object(n.jsx)(B.a,{children:Object(n.jsx)(W.a,{onClick:function(){e.toggleActiveTab("Chat")},className:Zt()({active:"Chat"===this.state.activeTab}),children:"Chat"})})]}),Object(n.jsxs)(Xt.a,{activeTab:this.state.activeTab,children:[Object(n.jsx)($t.a,{tabId:"Transcript",children:Object(n.jsx)(ca,{transcript:this.props.transcript})}),Object(n.jsx)($t.a,{tabId:"Record",children:Object(n.jsx)(ja,{voting_record:this.props.voting_record})}),Object(n.jsx)($t.a,{tabId:"Chat",children:Object(n.jsx)(na,{room:this.props.room})})]})]})}}]),a}(r.Component),ma=a(235),Oa=a.n(ma),xa=a(534),pa={Merlin:"RESISTANCE",Percival:"RESISTANCE",DrunkMerlin:"RESISTANCE",LoyalServant:"RESISTANCE",Assassin:"SPY",Morgana:"SPY",Oberon:"SPY",Mordred:"SPY",Minion:"SPY"},_a=function(e){var t=e.roles,a=e.num_players,n=0,r=0;t.forEach((function(e){"RESISTANCE"===pa[e]?n++:"SPY"===pa[e]&&r++}));var s=n>0&&r>0,c=r<(a+1)/2,i=!0,o=t.includes("Percival"),l=t.includes("Morgana"),d=t.includes("Merlin");(o||l)&&(i=o&&l&&d);var j=!0;return t.includes("DrunkMerlin")&&(j=d),s&&c&&i&&j},ga=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1,buttonDisabled:!1,num_roles_added:0,error_msg:null,roles:{Merlin:!0,Assassin:!0,Percival:!0,Morgana:!0,Mordred:!1,Oberon:!1,Minion:!1,DrunkMerlin:!1},features:{Excalibur:!1,"Lady of the Lake":!1}},e.toggle=function(){e.setState({modal:!e.state.modal})},e.onChangeCheck=function(t,a){var n=Object(k.a)({},e.state[a]);n[t.target.name]=!n[t.target.name],e.setState(Object(z.a)({},a,n))},e.onSubmit=function(t){if(t.preventDefault(),e.check_form_validation()){var a=e.get_final_setup();_a(a)&&!0?(e.props.onSetup(a),e.setState({buttonDisabled:!0}),e.toggle()):e.setState({error_msg:"Invalid game setup. Please try again."})}else e.setState({error_msg:"Invalid game setup. Please try again."})},e}return Object(l.a)(a,[{key:"check_form_validation",value:function(){var e=this,t=Object.keys(this.state.roles).filter((function(t){return e.state.roles[t]})).length;return this.props.num_players-t>=0}},{key:"get_final_setup",value:function(){for(var e=this,t=Object.keys(this.state.roles).filter((function(t){return e.state.roles[t]})),a=Number(this.props.num_players)-Number(t.length),n=0;n<a;n++)t.push("LoyalServant");return{roles:t,features:this.state.features,num_players:this.props.num_players}}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.roles).map((function(t,a){return Object(n.jsx)("div",{children:Object(n.jsx)(xa.a,{type:"checkbox",id:t,name:t,label:t,onChange:function(t){return e.onChangeCheck(t,"roles")},checked:e.state.roles[t]})},a)})),a=Object.keys(this.state.features).map((function(t,a){return Object(n.jsx)("div",{children:Object(n.jsx)(xa.a,{type:"checkbox",id:t,name:t,label:t,onChange:function(t){return e.onChangeCheck(t,"features")},checked:e.state.features[t]})},a)}));return Object(n.jsxs)("div",{children:[Object(n.jsx)(re.a,{className:Oa.a.Button,block:!0,disabled:this.state.buttonDisabled,color:"dark",onClick:this.toggle,children:"Create Game"}),Object(n.jsxs)(Q.a,{isOpen:this.state.modal,toggle:this.toggle,children:[Object(n.jsx)(Z.a,{toggle:this.toggle,children:"Create a Game"}),Object(n.jsxs)(X.a,{children:[this.state.error_msg?Object(n.jsxs)($.a,{color:"danger",children:[this.state.error_msg," "]}):null,Object(n.jsx)(ee.a,{onSubmit:this.onSubmit,children:Object(n.jsxs)(te.a,{children:[Object(n.jsxs)(ae.a,{for:"role_selection",children:["Number of Players: ",this.props.num_players]}),Object(n.jsx)("hr",{}),Object(n.jsx)(ae.a,{for:"role_selection",children:"Roles:"}),t,Object(n.jsx)("hr",{}),Object(n.jsx)(ae.a,{for:"role_selection",children:"Other:"}),a,Object(n.jsx)(re.a,{color:"dark",block:!0,disabled:this.state.buttonDisabled,style:{marginTop:"2rem"},children:"Submit"})]})})]})]})]})}}]),a}(r.Component),Ca=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsx)(G.a,{children:Object(n.jsx)($.a,{color:"danger",style:{marginTop:"2rem"},children:"Invalid room ID. Please make sure to create the room in the lobby first."})})})}}]),a}(r.Component),fa=function(e){var t=e.players_list;return t&&0!==t.length?Object(n.jsxs)("div",{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Players"}),Object(n.jsx)("hr",{}),Object(n.jsxs)(Me.a,{striped:!0,bordered:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"#"}),Object(n.jsx)("th",{children:"Name"})]})}),Object(n.jsx)("tbody",{children:t.map((function(e,t){var a=e.user_name;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t+1}),Object(n.jsxs)("td",{children:[a,0===t?" (Leader)":null]})]},t)}))})]})]}):null},va=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isLoading:!0,isValid:!1,hasLocked:!1,hasSetup:!1,hasStarted:!1,isRoomLeader:!1,board:null,button:null,team:null,PLAYERS_LIST:null,MISSION_TRACKER:null,ROUND_TRACKER:null,VOTING_RECORD:null,TRANSCRIPT:null},e._get_user_id=function(){return e.props.auth&&e.props.auth.user?e.props.auth.user.id:null},e._get_room_id=function(){return e.props.match.params.room_id},e._get_room_pwd=function(){return e.props.is_public?null:e.props.match.params.pwd},e.socket_event_listeners=function(){Je.on("client_game_view_data",(function(t){var a=t.isValid,n=t.hasLocked,r=t.hasSetup,s=t.hasStarted,c=t.hasEnded,i=t.roomLeaderId,o=t.boards,l=t.buttons,d=t.teams,j=t.PLAYERS_LIST,u=t.MISSION_TRACKER,h=t.ROUND_TRACKER,b=t.VOTING_RECORD,m=t.TRANSCRIPT,O=e._get_user_id(),x=null,p=null,_=null;o&&(x=o[O]?o[O]:o.spectate),l&&(p=l[O]?l[O]:null),d&&(_=d[O]?d[O]:null);var g=O===i;e.setState({isLoading:!1,isValid:a,hasLocked:n,hasSetup:r,hasStarted:s,hasEnded:c,isRoomLeader:g,board:x,button:p,team:_,PLAYERS_LIST:j,MISSION_TRACKER:u,ROUND_TRACKER:h,VOTING_RECORD:b,TRANSCRIPT:m})})),Je.on("client_game_invalid_or_unauthorized",(function(){e.setState({isLoading:!1})}))},e.onHandleEnter=function(){var t={user_id:e._get_user_id(),user_name:e.props.auth&&e.props.auth.user?e.props.auth.user.name:null,room_id:e._get_room_id(),room_pwd:e._get_room_pwd()};Je.emit("server_game_handle_ENTER",t)},e.onHandleSpectate=function(){var t={user_id:e._get_user_id(),room_id:e._get_room_id(),room_pwd:e._get_room_pwd()};Je.emit("server_game_handle_SPECTATE",t)},e.onLeaveRoom=function(){var t=e._get_room_id(),a={user_id:e._get_user_id(),room_id:t,room_pwd:e._get_room_pwd()};Je.emit("server_game_handle_LEAVE",a)},e.onLockRoom=function(){var t=e._get_room_id(),a={user_id:e._get_user_id(),room_id:t,room_pwd:e._get_room_pwd()};Je.emit("server_game_handle_LOCK",a)},e.onSetup=function(t){var a=e._get_room_id(),n={user_id:e._get_user_id(),room_id:a,room_pwd:e._get_room_pwd(),setup:t};Je.emit("server_game_handle_SETUP",n)},e.onStart=function(){var t={user_id:e._get_user_id(),room_id:e._get_room_id(),room_pwd:e._get_room_pwd()};Je.emit("server_game_handle_START",t)},e.onClickPlayerCard=function(t){var a=e._get_room_id(),n={user_id:e._get_user_id(),room_id:a,room_pwd:e._get_room_pwd(),target_idx:t};Je.emit("server_game_handle_SELECT",n)},e.onHandleButtonClick=function(t,a){var n=e._get_room_id(),r={user_id:e._get_user_id(),room_id:n,room_pwd:e._get_room_pwd()};"propose"===t?Je.emit("server_game_handle_PROPOSE",r):"round"===t?(r.isApproved=a,Je.emit("server_game_handle_ROUND",r)):"mission"===t?(r.isPassed=a,Je.emit("server_game_handle_MISSION",r)):"assassinate"===t?Je.emit("server_game_handle_ASSASSINATE",r):"give_excalibur"===t?Je.emit("server_game_handle_GIVE_EXCALIBUR",r):"use_excalibur"===t?(r.isExcaliburUsed=a,Je.emit("server_game_handle_USE_EXCALIBUR",r)):"confirm_excalibur"===t?Je.emit("server_game_handle_CONFIRM_EXCALIBUR",r):"use_lotl"===t?Je.emit("server_game_handle_USE_LOTL",r):"confirm_lotl"===t&&Je.emit("server_game_handle_CONFIRM_LOTL",r)},e._getIsPlayerInGame=function(){var t=e.state.PLAYERS_LIST;if(!t)return!1;var a=e._get_user_id();return t.filter((function(e){return e.user_id===a})).length>0},e._getRoomLeaderButton=function(){var t=e.state,a=t.hasLocked,r=t.hasSetup,s=t.hasStarted,c=t.isRoomLeader,i=t.PLAYERS_LIST,o=null;if(c){var l=i&&(i.length<5||i.length>12),d=a&&!r,j=r&&!s;!a?o=Object(n.jsx)(re.a,{className:Ve.a.Button,block:!0,disabled:l,color:"warning",onClick:e.onLockRoom,children:"Lock"}):d?o=Object(n.jsx)(ga,{num_players:e.state.PLAYERS_LIST.length,onSetup:e.onSetup}):j&&(o=Object(n.jsx)(re.a,{className:Ve.a.Button,block:!0,color:"success",onClick:e.onStart,children:"Start"}))}return o},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onHandleInitialize(),this.socket_event_listeners(),window.addEventListener("beforeunload",this.onLeaveRoom)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onLeaveRoom)}},{key:"onHandleInitialize",value:function(){var e=this;setTimeout((function(){var t={user_id:e._get_user_id(),room_id:e._get_room_id(),room_pwd:e._get_room_pwd()};Je.emit("server_game_handle_INITIALIZE",t)}),1e3)}},{key:"render",value:function(){if(this.state.isLoading)return Object(n.jsx)(Fe,{});if(!this.props.auth.isAuthenticated)return Object(n.jsx)(qe,{});if(!this.state.isValid)return Object(n.jsx)(Ca,{});var e=this.state,t=e.PLAYERS_LIST,a=e.MISSION_TRACKER,r=e.ROUND_TRACKER,s=e.VOTING_RECORD,c=e.TRANSCRIPT,i=this.state,o=i.board,l=i.button,d=i.team,j=this.state.hasStarted,u=this._get_room_id(),h=this._getRoomLeaderButton(),b=j?null:Object(n.jsxs)(G.a,{children:[h,Object(n.jsx)(fa,{players_list:t})]}),m=j?Object(n.jsxs)("div",{children:[Object(n.jsx)(Ht,{onClickPlayerCard:this.onClickPlayerCard,onHandleButtonClick:this.onHandleButtonClick,board:o,button:l,team:d,MISSION_TRACKER:a,ROUND_TRACKER:r}),Object(n.jsx)(ba,{room:u,voting_record:s,transcript:c})]}):null;return Object(n.jsxs)("div",{children:[Object(n.jsx)(Jt,{room:u,hasStarted:j,isPlayerInGame:this._getIsPlayerInGame(),onHandleEnter:this.onHandleEnter,onHandleSpectate:this.onHandleSpectate}),b,m]})}}]),a}(r.Component),ya=Object(u.b)((function(e){return{auth:e.auth}}),null)(va),Ta=a(236),Sa=a.n(Ta),ka=a(146),Na=a.n(ka),Ra={modal:!1,room_id:null,room_pwd:null,is_public:!0,is_rated:!1,isCreated:!1,success_msg:null,buttonDisabled:!1},La=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state=Ra,e.toggle=function(){e.setState(Object(k.a)(Object(k.a)({},Ra),{},{modal:!e.state.modal}))},e.handleClickPublic=function(t){e.setState({is_public:t})},e.handleClickRated=function(t){e.setState({is_rated:t})},e._generateArrBetweenEnds=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n.toString());return a},e._generateRandomRoomID=function(e){for(var t="",a="0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},e._generateRandomRoomPassword=function(e){for(var t="",a="abcdefghijklmnopqrstuvwxyz",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.is_public,r=a.is_rated,s=e._generateRandomRoomID(6),c=null;n?e.setState({room_id:s,room_pwd:c,isCreated:!0,success_msg:"Your room ID is ".concat(s),buttonDisabled:!0}):(c=e._generateRandomRoomPassword(6),e.setState({room_id:s,room_pwd:c,isCreated:!0,success_msg:"Your room ID is ".concat(s,' and your password is "').concat(c,'"'),buttonDisabled:!0}));var i={user_id:e.props.auth&&e.props.auth.user?e.props.auth.user.id:null,room_id:s,room_pwd:c,is_public:n,is_rated:r};Je.emit("server_game_handle_CREATE",i)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=Object(n.jsx)(re.a,{color:"success",className:Na.a.ToggleLobbyModalButton,onClick:this.toggle,children:"Create a Room"}),a=this.state,s=a.modal,c=a.room_id,i=a.room_pwd,o=a.is_public,l=a.is_rated,d=a.isCreated,j=a.success_msg,u=a.buttonDisabled,b=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(te.a,{check:!0,children:Object(n.jsxs)(ae.a,{check:!0,children:[Object(n.jsx)(ne.a,{checked:o,type:"radio",name:"radio_public_private",onChange:function(){return e.handleClickPublic(!0)}}),"Public"]})}),Object(n.jsx)(te.a,{check:!0,children:Object(n.jsxs)(ae.a,{check:!0,children:[Object(n.jsx)(ne.a,{checked:!o,type:"radio",name:"radio_public_private",onChange:function(){return e.handleClickPublic(!1)}}),"Private"]})})]}),m=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(te.a,{check:!0,children:Object(n.jsxs)(ae.a,{check:!0,children:[Object(n.jsx)(ne.a,{checked:!l,type:"radio",name:"radio_rated_unrated",onChange:function(){return e.handleClickRated(!1)}}),"Unrated"]})}),Object(n.jsx)(te.a,{check:!0,children:Object(n.jsxs)(ae.a,{check:!0,children:[Object(n.jsx)(ne.a,{checked:l,type:"radio",name:"radio_rated_unrated",onChange:function(){return e.handleClickRated(!0)}}),"Rated"]})})]}),O=Object(n.jsx)(re.a,{color:"dark",block:!0,disabled:u,className:Na.a.CreateRoomButton,children:"Create Room"}),x=d?Object(n.jsx)($.a,{className:"mt-3",color:"success",children:j}):null,p=Object(n.jsxs)(r.Fragment,{children:[d&&o&&Object(n.jsx)(h.b,{to:"/game/".concat(c),children:Object(n.jsx)(re.a,{color:"success",style:{marginTop:"2rem"},block:!0,children:"Join Public Room"})}),d&&!o&&Object(n.jsx)(h.b,{to:"/game/".concat(c,"/pwd/").concat(i),children:Object(n.jsx)(re.a,{color:"success",style:{marginTop:"2rem"},block:!0,children:"Join Private Room"})})]});return Object(n.jsxs)("div",{children:[t,Object(n.jsxs)(Q.a,{isOpen:s,toggle:this.toggle,children:[Object(n.jsx)(Z.a,{toggle:this.toggle,children:"Create a Room"}),Object(n.jsx)(X.a,{children:Object(n.jsxs)(ee.a,{onSubmit:this.onSubmit,children:[b,Object(n.jsx)("hr",{}),m,Object(n.jsx)("hr",{}),O,x,p]})})]})]})}}]),a}(r.Component),Aa=Object(u.b)((function(e){return{auth:e.auth}}),null)(La),Ea=a(25),Ia=a.n(Ea),Pa=a(237),wa=a.n(Pa),Ma=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1,enteredPassword:"",enterButtonDisabled:!0},e.toggle=function(){e.setState({modal:!e.state.modal})},e.handleEnterPassword=function(t){var a=t.target.value,n=6!==a.length;e.setState({enteredPassword:a,enterButtonDisabled:n})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.buttonName,a=e.buttonColor,r=e.room_id,s=this.state,c=s.modal,i=s.enteredPassword,o=s.enterButtonDisabled;return Object(n.jsxs)("div",{children:[Object(n.jsx)(re.a,{color:a,className:wa.a.LobbyTableButton,onClick:this.toggle,children:t}),Object(n.jsxs)(Q.a,{isOpen:c,toggle:this.toggle,children:[Object(n.jsxs)(Z.a,{children:["Please enter the password for private room ",r]}),Object(n.jsxs)(X.a,{children:[Object(n.jsx)(ne.a,{type:"text",maxLength:6,value:i,placeholder:"Enter password...",onChange:this.handleEnterPassword}),Object(n.jsx)("br",{}),Object(n.jsx)(h.b,{to:"game/".concat(r,"/pwd/").concat(i),children:Object(n.jsx)(re.a,{color:a,block:!0,disabled:o,children:t})})]})]})]})}}]),a}(r.Component),Ba=function(e){var t=Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"7",className:Ia.a.LobbyTableCell,children:"No games in progress. Try making one!"})},"single");return e.lobby_data.length>0&&(t=e.lobby_data.map((function(e,t){var a=e.room_id,r=e.is_public,s=e.is_rated,c=e.num_players,i=e.hasLocked,o=e.hasEnded,l=r?"public":"private",d=s?"rated":"unrated",j=Da(i,o),u=Ga(r,j,a);return Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,scope:"row",children:t+1}),Object(n.jsx)("td",{className:Ia.a.LobbyTableCell,children:a}),Object(n.jsx)("td",{className:Ia.a.LobbyTableCell,children:l}),Object(n.jsx)("td",{className:Ia.a.LobbyTableCell,children:d}),Object(n.jsxs)("td",{className:Ia.a.LobbyTableCell,children:[c," / 12"]}),Object(n.jsx)("td",{className:Ia.a.LobbyTableCell,children:j}),Object(n.jsx)("td",{className:Ia.a.LobbyTableCell,children:u})]},t)}))),Object(n.jsx)("div",{className:Ia.a.TableContainer,children:Object(n.jsxs)(Me.a,{dark:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,children:"#"}),Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,children:"Game ID"}),Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,children:"Setting"}),Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,children:"Type"}),Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,children:"Capacity"}),Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,children:"Status"}),Object(n.jsx)("th",{className:Ia.a.LobbyTableCell,children:"Action"})]})}),Object(n.jsx)("tbody",{children:t})]})})},Da=function(e,t){return e?t?"finished":"in progress":"waiting"},Ga=function(e,t,a){if(e){if("waiting"===t)return Object(n.jsx)(h.b,{to:"game/".concat(a),children:Object(n.jsx)(re.a,{color:"success",children:"Join"})});if("in progress"===t||"finished"===t)return Object(n.jsx)(h.b,{to:"game/".concat(a),children:Object(n.jsx)(re.a,{color:"info",children:"Spectate"})})}else{if("waiting"===t)return Object(n.jsx)(Ma,{buttonName:"Join",buttonColor:"success",room_id:a});if("in progress"===t||"finished"===t)return Object(n.jsx)(Ma,{buttonName:"Spectate",buttonColor:"info",room_id:a})}},Fa=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={lobby_data:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;Je.emit("server_game_lobby_data"),Je.on("client_game_lobby_data",(function(t){e.setState({lobby_data:t})}))}},{key:"render",value:function(){var e=Object(n.jsxs)("div",{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Chat"}),Object(n.jsx)("hr",{})]}),t=Object(n.jsxs)("div",{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Game Lobby"}),Object(n.jsx)("hr",{})]});return Object(n.jsx)("div",{className:Sa.a.LobbyPageContainer,children:Object(n.jsxs)(G.a,{children:[e,Object(n.jsx)(na,{room:"lobby"}),t,Object(n.jsx)(Aa,{}),Object(n.jsx)(Ba,{lobby_data:this.state.lobby_data})]})})}}]),a}(r.Component),Ha=a(72),Ua=a.n(Ha),Ya=function(){var e=Object(n.jsxs)("div",{children:[Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]});return Object(n.jsx)("div",{className:Ua.a.OuterContainer,children:Object(n.jsxs)("div",{className:Ua.a.InnerContainer,children:[e,Object(n.jsxs)("div",{className:Ua.a.InnerText,children:["Welcome to The Resistance: Avalon",Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:Ua.a.SubText,children:"Please register and log in to play"})]}),Object(n.jsx)("div",{className:Ua.a.DisclaimerText,children:'This is not affiliated with the official creators of "The Resistance: Avalon" game. This was purely a hobby project, from enthusiasts of the game.'})]})})},Wa=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return this.props.isAuthenticated?Object(n.jsx)(Fa,{}):Object(n.jsx)(Ya,{})}}]),a}(r.Component),Va=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),null)(Wa),Ka=a(149),Ja=a.n(Ka),qa=a(238),za=a.n(qa),Qa=a(85),Za=a.n(Qa),Xa=function(e){var t=e.avatar,a=e.name,r=e.team,s=e.description;return Object(n.jsxs)("div",{className:Za.a.CharacterCardContainer,children:[Object(n.jsx)("div",{className:Za.a.CharacterCardImageContainer,children:Object(n.jsx)("img",{src:t,alt:"Avatar",className:Za.a.CharacterCardImage})}),Object(n.jsxs)("div",{className:Za.a.CharacterCardTextContainer,children:[Object(n.jsx)("h4",{children:Object(n.jsx)("b",{children:a})}),Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:["Team: ",r]},"team"),s.map((function(e,t){return Object(n.jsx)("li",{children:e},t)}))]})]})]})},$a=function(){var e=en();return Object(n.jsx)("div",{className:za.a.CharacterCardsContainer,children:e.map((function(e){return Object(n.jsx)(Xa,Object(k.a)({},e))}))})},en=function(){return[{avatar:Ne,name:"Loyal Servant",team:"Resistance",description:["Has no special powers"]},{avatar:Re,name:"Merlin",team:"Resistance",description:["Sees all Spies except for Mordred","Must stay discrete to Spies"]},{avatar:Pe,name:"Percival",team:"Resistance",description:["Sees both Merlin and Morgana as possibly Merlin","Must stay vigilant and careful"]},{avatar:Le,name:"Minion",team:"Spy",description:["No extra powers beyond seeing other Spies (besides Oberon)"]},{avatar:Se,name:"Assassin",team:"Spy",description:["Decides who to assassinate at the end of the game"]},{avatar:Ee,name:"Morgana",team:"Spy",description:["Seen by Percival as a potential Merlin","Must try to deceive Percival"]},{avatar:Ae,name:"Mordred",team:"Spy",description:["Remains hidden to Merlin","Must try to pass off as Resistance"]},{avatar:Ie,name:"Oberon",team:"Spy",description:["Remains hidden to other Spies but is known by Merlin","A wildcard to add extra chaos"]},{avatar:ke,name:"Drunk Merlin",team:"Resistance",description:["Sees himself as Merlin","Sees the same number of Spies as Merlin","Maximum chaos"]}]},tn=a(106),an=a.n(tn),nn=function(e){var t=e.name,a=e.description;return Object(n.jsxs)("div",{className:an.a.FeatureCardContainer,children:[Object(n.jsx)("div",{className:an.a.FeatureCardHeaderContainer,children:Object(n.jsx)("h1",{children:t})}),Object(n.jsx)("div",{className:an.a.FeatureCardTextContainer,children:Object(n.jsx)("ul",{children:a.map((function(e,t){return Object(n.jsx)("li",{children:e},t)}))})})]})},rn=function(){var e=sn();return Object(n.jsx)("div",{children:e.map((function(e){return Object(n.jsx)(nn,Object(k.a)({},e))}))})},sn=function(){return[{name:"Excalibur",description:["Leader chooses a member of the proposed team to grant the power of Excalibur","If the team is approved, the player granted Excalibur can choose to flip the vote of a target player after the mission","If the player granted Excalibur chooses to use Excalibur, the player can see the original vote of the target player"]},{name:"Lady of the Lake",description:["At the start of the game, the Lady of the Lake token is granted to the player sitting to the right of the leader","At the end of missions 2, 3, and 4, the player granted the Lady of the Lake selects a player in the game to inquisit","The player inquisited by the Lady of the Lake must reveal their true team to the granted player","No player who used Lady of the Lake may have Lady of the Lake used on them"]},{name:"Public vs. Private Games",description:["Ongoing public games and private games are both shown in the main lobby","Private games require a password to enter","Spectators may spectate both public and private games (can spectate private games if they have the password)"]},{name:"Rated Games",description:['Setting the game as "Rated" will affect every player in the game',"Rating system is based on the ELO system, using the average ELO of each team","Rated games that are abandoned will negatively impact the ELO of players of both teams"]}]},cn=function(){return Object(n.jsx)("div",{className:Ja.a.AboutPage,children:Object(n.jsxs)(G.a,{children:[on,ln,dn]})})},on=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Characters"}),Object(n.jsx)("hr",{}),Object(n.jsx)($a,{})]}),ln=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Features"}),Object(n.jsx)("hr",{}),Object(n.jsx)(rn,{})]}),dn=Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Rules"}),Object(n.jsx)("hr",{}),Object(n.jsxs)("p",{children:["The rules of Avalon are explained nicely in this",Object(n.jsxs)("a",{href:"http://upload.snakesandlattes.com/rules/r/ResistanceAvalon.pdf",target:"_blank",rel:"noopener noreferrer",children:[" ","guide"," "]})," ","and video here:"]}),Object(n.jsx)("div",{className:Ja.a.RulesVideoContainer,children:Object(n.jsx)("iframe",{title:"The Resistance: Avalon - How To Play",className:"mb-3 mt-3 ",src:"https://www.youtube.com/embed/rXlK3NZjLGc"})})]})}),jn=a(239),un=a.n(jn),hn=a(27),bn=a.n(hn),mn=function(e){var t=e.byRoles,a=Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"6",className:bn.a.CellCenterText,children:"Stats are loading..."})},"loading"),r=Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"6",className:bn.a.CellCenterText,children:"No stats to show. Please play more games to see."})},"noData"),s=t?r:a,c=t&&t.length>0?xn(t):s,i=Object(n.jsx)("div",{className:bn.a.TableContainer,children:Object(n.jsxs)(Me.a,{dark:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:bn.a.CellCenterText,children:"#"}),Object(n.jsx)("th",{className:bn.a.CellCenterText,children:"Team"}),Object(n.jsx)("th",{className:bn.a.CellCenterText,children:"Role"}),Object(n.jsx)("th",{className:bn.a.CellCenterText,children:"Games Won"}),Object(n.jsx)("th",{className:bn.a.CellCenterText,children:"Games Played"}),Object(n.jsx)("th",{className:bn.a.CellCenterText,children:"Win %"})]})}),Object(n.jsx)("tbody",{children:c})]})});return Object(n.jsx)("div",{children:i})},On={RESISTANCE:{color:"#7EC8E3"},SPY:{color:"#ff726f"}},xn=function(e){return e.map((function(e,t){var a=e.team,r=e.role,s=e.games_won,c=e.games_played,i=pn(s,c),o=On[a];return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:bn.a.CellCenterText,children:t+1}),Object(n.jsx)("td",{className:bn.a.CellCenterText,style:o,children:a}),Object(n.jsx)("td",{className:bn.a.CellCenterText,style:o,children:r}),Object(n.jsx)("td",{className:bn.a.CellCenterText,children:s}),Object(n.jsx)("td",{className:bn.a.CellCenterText,children:c}),Object(n.jsx)("td",{className:bn.a.CellCenterText,children:i})]},t+1)}))},pn=function(e,t){return 0===t?0:parseInt(Math.round(e/t*1e3))/10},_n=a(24),gn=a.n(_n),Cn={color:"#7EC8E3"},fn={color:"#90ee90"},vn={color:"#ff726f"},yn=function(e){var t=e.history,a=Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"8",style:{textAlign:"center"},children:"Stats are loading..."})},"loading"),r=t?Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"8",style:{textAlign:"center"},children:"No stats to show. Please play more games to see."})},"noData"):a,s=t&&t.length>0?Tn(t):r,c=Object(n.jsx)("div",{className:gn.a.TableContainer,children:Object(n.jsxs)(Me.a,{dark:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"#"}),Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"Date"}),Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"Setting"}),Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"Type"}),Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"Num Players"}),Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"Team"}),Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"Role"}),Object(n.jsx)("th",{className:gn.a.CellCenterText,children:"Result"})]})}),Object(n.jsx)("tbody",{children:s})]})});return Object(n.jsx)("div",{children:c})},Tn=function(e){return e.map((function(e,t){var a=e.date,r=e.is_public,s=e.is_rated,c=e.num_players,i=e.role,o=e.team,l=e.result,d=Sn(a),j=r?"public":"private",u=s?"rated":"unrated",h=c,b=o,m=i,O=l.winningTeam===o?"WIN":"LOSS",x="RESISTANCE"===o?Cn:vn,p="WIN"===O?fn:vn;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:gn.a.CellCenterText,children:t+1}),Object(n.jsx)("td",{className:gn.a.CellCenterText,children:d}),Object(n.jsx)("td",{className:gn.a.CellCenterText,children:j}),Object(n.jsx)("td",{className:gn.a.CellCenterText,children:u}),Object(n.jsx)("td",{className:gn.a.CellCenterText,children:h}),Object(n.jsx)("td",{className:gn.a.CellCenterText,style:x,children:b}),Object(n.jsx)("td",{className:gn.a.CellCenterText,style:x,children:m}),Object(n.jsx)("td",{className:gn.a.CellCenterText,style:p,children:O})]},t+1)}))},Sn=function(e){return new Date(e).toISOString().split("T")[0]},kn=a(33),Nn=a.n(kn),Rn=function(e){var t=e.overall,a=Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"6",style:{textAlign:"center"},children:"Stats are loading..."})},"loading"),r=t?Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"6",style:{textAlign:"center"},children:"No stats to show. Please play more games to see."})},"noData"):a,s=t&&t.length>0?An(t):r,c=Object(n.jsx)("div",{className:Nn.a.TableContainer,children:Object(n.jsxs)(Me.a,{dark:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:Nn.a.CellCenterText,children:"#"}),Object(n.jsx)("th",{className:Nn.a.CellCenterText,children:"Team"}),Object(n.jsx)("th",{className:Nn.a.CellCenterText,children:"Games Won"}),Object(n.jsx)("th",{className:Nn.a.CellCenterText,children:"Games Played"}),Object(n.jsx)("th",{className:Nn.a.CellCenterText,children:"Win %"})]})}),Object(n.jsx)("tbody",{children:s})]})});return Object(n.jsx)("div",{children:c})},Ln={TOTAL:{color:"#90ee90"},RESISTANCE:{color:"#7EC8E3"},SPY:{color:"#ff726f"}},An=function(e){return e.map((function(e,t){var a=e.team,r=e.games_won,s=e.games_played,c=En(r,s),i=Ln[a];return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:Nn.a.CellCenterText,children:t+1}),Object(n.jsx)("td",{className:Nn.a.CellCenterText,style:i,children:a}),Object(n.jsx)("td",{className:Nn.a.CellCenterText,children:r}),Object(n.jsx)("td",{className:Nn.a.CellCenterText,children:s}),Object(n.jsx)("td",{className:Nn.a.CellCenterText,children:c})]},t+1)}))},En=function(e,t){return 0===t?0:parseInt(Math.round(e/t*1e3))/10},In=a(23),Pn=a.n(In),wn=a(532),Mn=a(535),Bn=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={enteredNames:"",headToHead:[],isLoading:!1,errorMsg:null},e._get_user_id=function(){return e.props.auth&&e.props.auth.user?e.props.auth.user.id:null},e._get_user_name=function(){return e.props.auth&&e.props.auth.user?e.props.auth.user.name:null},e.isValidQuery=function(t,a){if(!t)return!1;if(!(a.length>0))return!1;var n=e._get_user_name();return!a.includes(n)&&!a.includes(" ")},e.handleEnterNames=function(t){var a=t.target.value;e.setState({enteredNames:a})},e.handlePressEnter=function(t){"Enter"===t.key&&e.handleSearch()},e.handleSearch=function(){var t=e.state.enteredNames,a=e._get_user_id();e.isValidQuery(a,t)?(e.setState({isLoading:!0}),I.a.get("/api/games/headtohead/".concat(a,"/").concat(t)).then((function(t){e.setState({isLoading:!1,errorMsg:null,headToHead:t.data})}))):e.setState({errorMsg:"Invalid query. Please follow the example: player1,player2 ..."})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.enteredNames,a=e.headToHead,r=e.isLoading,s=e.errorMsg,c=s?Object(n.jsx)($.a,{className:"mt-3",color:"danger",children:s}):null,i=Object(n.jsxs)(wn.a,{children:[Object(n.jsx)(ne.a,{type:"text",value:t,placeholder:"Enter a username or a list of usernames (separated by commas, no space)...",onChange:this.handleEnterNames,onKeyPress:this.handlePressEnter}),Object(n.jsx)(Mn.a,{addonType:"append",children:Object(n.jsx)(re.a,{color:"success",onClick:this.handleSearch,children:"Search"})})]}),o=Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"6",className:Pn.a.CellCenterText,children:"Stats are loading..."})},"loading"),l=Object(n.jsx)("tr",{children:Object(n.jsx)("th",{colSpan:"6",className:Pn.a.CellCenterText,children:"No stats to show. Please play more games to see."})},"noData"),d=Gn(a),j=d.length>0?d:l,u=r?o:j,h=Object(n.jsx)("div",{className:Pn.a.TableContainer,children:Object(n.jsxs)(Me.a,{dark:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:Pn.a.CellCenterText,children:"#"}),Object(n.jsx)("th",{className:Pn.a.CellCenterText,children:"Player"}),Object(n.jsx)("th",{className:Pn.a.CellCenterText,children:"Team"}),Object(n.jsx)("th",{className:Pn.a.CellCenterText,children:"Your Games Won"}),Object(n.jsx)("th",{className:Pn.a.CellCenterText,children:"Total Games Played"}),Object(n.jsx)("th",{className:Pn.a.CellCenterText,children:"Win %"})]},"header")}),Object(n.jsx)("tbody",{children:u})]})});return Object(n.jsxs)("div",{children:[c,i,h]})}}]),a}(r.Component),Dn=Object(u.b)((function(e){return{auth:e.auth}}),null)(Bn),Gn=function(e){return e.map((function(e,t){var a=e.Player,s=e.Same,c=e.Different,i=s["Your Games Won"],o=s["Total Games Played"],l=Fn(i,o),d=c["Your Games Won"],j=c["Total Games Played"],u=Fn(d,j);return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:Pn.a.CellCenterText,style:{verticalAlign:"middle"},rowSpan:2,children:t+1}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,style:{verticalAlign:"middle"},rowSpan:2,children:a}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:"Same"}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:i}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:o}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:l})]},2*t),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:"Different"}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:d}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:j}),Object(n.jsx)("td",{className:Pn.a.CellCenterText,children:u})]},2*t+1)]},t)}))},Fn=function(e,t){return 0===t?0:parseInt(Math.round(e/t*1e3))/10},Hn=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isAuthenticated:!1,isLoadingRating:!0,isLoadingStats:!0,rating:null,history:null,overall:null,byRoles:null},e._get_user_id=function(){return e.props.auth&&e.props.auth.user?e.props.auth.user.id:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=e._get_user_id();t?(I.a.get("/api/ratings/".concat(t)).then((function(t){var a=t.data;e.setState({isLoadingRating:!1,rating:a})})),I.a.get("/api/games/".concat(t)).then((function(t){var a=t.data,n=Yn(a),r=Wn(a),s=Vn(a);e.setState({isAuthenticated:!0,isLoadingStats:!1,history:n,overall:r,byRoles:s})}))):e.setState({isLoadingRating:!1,isLoadingStats:!1})}),1e3)}},{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,a=e.isLoadingRating,r=e.isLoadingStats,s=e.rating,c=e.history,i=e.overall,o=e.byRoles;return a||r?Object(n.jsx)(Fe,{}):t?Object(n.jsx)("div",{children:Object(n.jsxs)(G.a,{children:[Object(n.jsxs)("div",{className:un.a.RatingBanner,children:["Rating: ",s||1500]}),Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"History"}),Object(n.jsx)("hr",{}),Object(n.jsx)(yn,{history:c}),Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Overall"}),Object(n.jsx)("hr",{}),Object(n.jsx)(Rn,{overall:i}),Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"By Role"}),Object(n.jsx)("hr",{}),Object(n.jsx)(mn,{byRoles:o}),Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Head to Head"}),Object(n.jsx)("hr",{}),Object(n.jsx)(Dn,{})]})}):Object(n.jsx)(qe,{})}}]),a}(r.Component),Un=Object(u.b)((function(e){return{auth:e.auth}}),null)(Hn),Yn=function(e){return e},Wn=function(e){if(0===e.length)return[];var t=0,a=0,n=0,r=0;return e.forEach((function(e){var s=e.team,c=s===e.result.winningTeam?"WIN":"LOSS";"RESISTANCE"===s?("WIN"===c&&t++,a++):"SPY"===s&&("WIN"===c&&n++,r++)})),[{team:"TOTAL",games_won:t+n,games_played:a+r},{team:"RESISTANCE",games_won:t,games_played:a},{team:"SPY",games_won:n,games_played:r}]},Vn=function(e){var t=[],a=new Set,n=new Map,r=new Map;e.forEach((function(e){var s=e.role,c=e.team,i=c===e.result.winningTeam?"WIN":"LOSS";if(a.has(s)){if("WIN"===i){var o=n.get(s);n.set(s,o+1)}var l=r.get(s);r.set(s,l+1)}else a.add(s),t.push({role:s,team:c}),n.set(s,"WIN"===i?1:0),r.set(s,1)}));var s=t.map((function(e){var t=e.role;return{role:t,team:e.team,games_won:n.get(t),games_played:r.get(t)}}));return s.sort((function(e,t){return e.team===t.team?e.role>t.role?1:-1:e.team>t.team?1:-1})),s},Kn=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),null)((function(e){var t=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(he.b,{exact:!0,path:"/",component:Va}),Object(n.jsx)(he.b,{exact:!0,path:"/about",component:He}),Object(n.jsx)(he.b,{exact:!0,path:"/rules",component:cn}),Object(n.jsx)(he.b,{exact:!0,path:"/stats",component:Un}),Object(n.jsx)(he.b,{exact:!0,path:"/game/:room_id",render:function(e){return Object(n.jsx)(ya,Object(k.a)(Object(k.a)({},e),{},{is_public:!0}))}}),Object(n.jsx)(he.b,{exact:!0,path:"/game/:room_id/pwd/:pwd",render:function(e){return Object(n.jsx)(ya,Object(k.a)(Object(k.a)({},e),{},{is_public:!1}))}})]}),a=Object(n.jsxs)(he.d,{children:[t,Object(n.jsx)(he.a,{to:"/"})]}),s=Object(n.jsxs)(he.d,{children:[t,Object(n.jsx)(he.a,{to:"/"})]});return e.isAuthenticated?Object(n.jsx)(he.d,{children:a}):Object(n.jsx)(he.d,{children:s})})),Jn=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("Plz don't hack me ;D"),A.dispatch((function(e,t){e({type:O}),I.a.get("/api/auth/user",M(t)).then((function(t){return e({type:x,payload:t.data})})).catch((function(t){e(P(t.response.data,t.response.status)),e({type:p})}))}))}},{key:"render",value:function(){return Object(n.jsx)(u.a,{store:A,children:Object(n.jsxs)(h.a,{children:[Object(n.jsx)(ue,{}),Object(n.jsx)(Kn,{})]})})}}]),a}(r.Component),qn=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,536)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Jn,{})}),document.getElementById("root")),qn()},53:function(e,t,a){e.exports={CellCenterText:"AboutLeaderboard_CellCenterText__3p2jj",TableContainer:"AboutLeaderboard_TableContainer__3IQf-",LeaderboardBanner:"AboutLeaderboard_LeaderboardBanner__1M7DE"}},57:function(e,t,a){e.exports={PlayerCard:"PlayerCard_PlayerCard__pBzvF",PlayerCard2:"PlayerCard_PlayerCard2__3oGYH",MissionMarkerWooden:"PlayerCard_MissionMarkerWooden__2Hxhp",MissionMarker:"PlayerCard_MissionMarker__ULt7u",LeaderMarker:"PlayerCard_LeaderMarker__1y6YS",ExcaliburMarker:"PlayerCard_ExcaliburMarker__5hubI",HammerMarker:"PlayerCard_HammerMarker__2brh8",LadyMarker:"PlayerCard_LadyMarker__1eE2P",NameBanner:"PlayerCard_NameBanner__ox54G",NameBanner2:"PlayerCard_NameBanner2__12jdt"}},71:function(e,t,a){e.exports={GameButtons:"GameButtons_GameButtons__B_yPB",GameButtonDuo:"GameButtons_GameButtonDuo__1IMFz"}},72:function(e,t,a){e.exports={OuterContainer:"WelcomePage_OuterContainer__rIexZ",InnerContainer:"WelcomePage_InnerContainer__Sd_b7",InnerText:"WelcomePage_InnerText__TbIob",SubText:"WelcomePage_SubText__3WVPn",DisclaimerText:"WelcomePage_DisclaimerText__2CGtN"}},83:function(e,t,a){e.exports={MissionTracker:"MissionTracker_MissionTracker__1Q73D",MissionTrackerToken:"MissionTracker_MissionTrackerToken__lxFwg",MissionTrackerText:"MissionTracker_MissionTrackerText__DxnLb",MissionTrackerSubtext:"MissionTracker_MissionTrackerSubtext__3KNqK"}},84:function(e,t,a){e.exports={OuterTableContainer:"GameTranscript_OuterTableContainer__3FzwH",TableHeader:"GameTranscript_TableHeader__9U7P6",TableBodyContainer:"GameTranscript_TableBodyContainer__ZbnKN",TableBody:"GameTranscript_TableBody__3aoc-"}},85:function(e,t,a){e.exports={CharacterCardContainer:"CharacterCard_CharacterCardContainer__2xqq3",CharacterCardImageContainer:"CharacterCard_CharacterCardImageContainer__2pXA8",CharacterCardImage:"CharacterCard_CharacterCardImage__11cJ1",CharacterCardTextContainer:"CharacterCard_CharacterCardTextContainer__3kRON"}}},[[510,1,2]]]);
//# sourceMappingURL=main.be6abfc9.chunk.js.map